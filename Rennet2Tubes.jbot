//#! tooltip = Fills curding tubes with rennet//#! icon = gfx/invobjs/jar-rennet//#! name = Rennet to tubes//#! uniq = RENNETTOTUBESinclude("jBotAPI");var offset;var offsetm;var exit = false;//function checks inventory//and opens it, if it closedfunction checkInventory(){	if(!jHaveWindow("Inventory"))	{		jToggleInventory();		while(!jHaveWindow("Inventory"))			jSleep(100);	}	return jGetWindow("Inventory").getInventories()[0];}function makeMenu() {	var blist = ["Север", "Юг", "Запад", "Восток", "Выход"];	var selectWindow = jGUIWindow(jCoord(250, 250), jCoord(215, 140), "Табы");	var label = jGUILabel(selectWindow, jCoord(65, 5), "Где стоят табы:");	jGUIButton(selectWindow, jCoord(55, 25),  100, blist[0]);  // N	jGUIButton(selectWindow, jCoord(55, 75),  100, blist[1]);  // S	jGUIButton(selectWindow, jCoord(5, 50),  100, blist[2]);   // W	jGUIButton(selectWindow, jCoord(110, 50),  100, blist[3]); // E	jGUIButton(selectWindow, jCoord(55, 110),  100, blist[4]); // Exit	selectWindow.toggleCloseButton();	var btext = selectWindow.waitButtonClick();	if(btext == blist[0]) {offset = jCoord(0, -1); offsetm = jCoord(-1, 0);}	if(btext == blist[1]) {offset = jCoord(0, 1); offsetm = jCoord(-1, 0);}	if(btext == blist[2]) {offset = jCoord(-1, 0); offsetm = jCoord(0, -1);}	if(btext == blist[3]) {offset = jCoord(1, 0); offsetm = jCoord(0, -1);}	if(btext == blist[4]) exit = true;	selectWindow.destroy();}function main(){	jDropLastWindow();	makeMenu();	if(exit == true) return;	var ritems = checkInventory().getItems("rennet");	if(!ritems.length) return;	var input = jGetInputWidget(150, 150, "", "Банок с реннетом:");	var count = 0;	if(input != null)	{		if(input.waitForPress(20000)) {			count = input.intValue();			input.close();		}		input.close();	}	if(count < 1 || count > 2) return;	var current = 0;	for(var i = 0; i < Math.floor(ritems.length/count); i++)	{		for(var j = 0; j < count; j++) {			var tube = jFindObjectWithOffset("/tub", 7, offset);			if(tube == null) return;			var c = ritems[current].coord();			ritems[current].take();			jWaitDrag(actionTimeout);			tube.interactClick(0);			while(jGetDraggingItem().resName().indexOf("rennet") != -1)				jSleep(300);			checkInventory().drop(c);			jWaitDrop(actionTimeout);			current++;		}		jMoveStep(offsetm);		jWaitMove(actionTimeout);	}}main();